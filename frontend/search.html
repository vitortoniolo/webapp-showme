<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>ShowMe - Buscar eventos</title>

  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: '#22c55e',
            'brand-dark': '#15803d',
            'brand-muted': '#030712'
          }
        }
      }
    }
  </script>

  <!-- Alpine.js via CDN -->
  <script src="js/auth.js"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    :root {
      color-scheme: dark;
    }
    body {
      background-color: #030712;
      background-image:
        radial-gradient(circle at 15% 20%, rgba(34, 197, 94, 0.08), transparent 55%),
        radial-gradient(circle at 85% 0%, rgba(16, 185, 129, 0.1), transparent 45%),
        radial-gradient(circle at 50% 100%, rgba(248, 250, 252, 0.05), transparent 40%);
      min-height: 100vh;
    }
    .geometric-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      opacity: 0.7;
    }
    .geometric-layer .shape {
      position: absolute;
      border-radius: 18% 42% 30% 50%;
      mix-blend-mode: screen;
      filter: blur(0px) drop-shadow(0 30px 60px rgba(3, 7, 18, 0.5));
      animation: float 24s ease-in-out infinite;
    }
    .geometric-layer .shape:nth-child(1) {
      top: -10%;
      left: -6%;
      width: 420px;
      height: 420px;
      background: linear-gradient(140deg, rgba(34, 197, 94, 0.55), rgba(45, 212, 191, 0.4));
      clip-path: polygon(10% 0%, 90% 5%, 100% 80%, 65% 100%, 0% 72%, 0% 30%);
    }
    .geometric-layer .shape:nth-child(2) {
      bottom: -18%;
      right: -5%;
      width: 500px;
      height: 500px;
      background: linear-gradient(160deg, rgba(15, 118, 110, 0.5), rgba(16, 185, 129, 0.4));
      clip-path: polygon(18% 8%, 100% 0%, 82% 70%, 68% 100%, 6% 88%, 0% 32%);
      animation-duration: 30s;
    }
    .geometric-layer .shape:nth-child(3) {
      top: 35%;
      left: 15%;
      width: 260px;
      height: 260px;
      background: linear-gradient(140deg, rgba(52, 211, 153, 0.45), rgba(34, 197, 94, 0.35));
      clip-path: polygon(25% 5%, 100% 18%, 78% 100%, 0% 82%, 0% 40%);
      animation-duration: 20s;
    }
    @keyframes float {
      0% { transform: translate3d(0, 0, 0) rotate(0deg); }
      50% { transform: translate3d(20px, -25px, 0) rotate(6deg); }
      100% { transform: translate3d(0, 0, 0) rotate(0deg); }
    }
    .event-description {
      display: -webkit-box;
      -webkit-line-clamp: 4;
      -webkit-box-orient: vertical;
      overflow: hidden;
      max-height: 6.5rem;
    }
  </style>

  <style>
    input, select, textarea {
      background-color: rgba(15, 23, 42, 0.6);
      color: #f8fafc;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    input::placeholder, textarea::placeholder {
      color: rgba(148, 163, 184, 0.8);
    }
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: rgba(34, 197, 94, 0.6);
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2);
    }
  </style>
</head>
<body class="text-slate-100 antialiased relative" x-data="searchApp()" x-init="init()">
  <div class="geometric-layer" aria-hidden="true">
    <span class="shape"></span>
    <span class="shape"></span>
    <span class="shape"></span>
  </div>

  <div class="min-h-screen flex flex-col relative z-10">
    <!-- Header -->
    <header class="bg-slate-900/70 backdrop-blur border-b border-white/10 sticky top-0 z-20 shadow-lg shadow-black/40">
      <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between gap-4">
        <a href="index.html" class="flex flex-1 md:flex-none items-center justify-center md:justify-start space-x-3 text-center md:text-left">
          <div class="w-20 h-20 rounded-full overflow-hidden flex items-center justify-center shrink-0">
            <img src="assets/logo.png" alt="Logo ShowMe" class="w-full h-full object-cover">
          </div>
          <span class="text-2xl font-semibold text-white tracking-tight">ShowMe</span>
        </a>
        <nav class="hidden md:flex items-center space-x-6 text-slate-300">
          <a href="index.html" class="hover:text-white transition">Home</a>
          <a href="search.html" class="hover:text-white transition">Eventos</a>
          <a href="create-event.html" class="hover:text-white transition">Criar evento</a>
          <a href="create-establishment.html" class="hover:text-white transition">Criar estabelecimento</a>
        </nav>
        <div class="flex items-center space-x-3" x-data="authMenu()" x-init="init()">
          <template x-if="user">
            <div class="flex items-center space-x-3">
              <a :href="dashboardUrl()" class="inline-flex items-center px-4 py-2 rounded-full bg-brand-dark text-white font-semibold shadow-lg shadow-brand-dark/40 hover:bg-brand-dark/90 transition">
                <span x-text="dashboardLabel()"></span>
              </a>
              <button type="button" class="inline-flex items-center px-4 py-2 rounded-full border border-white/20 text-slate-200 font-semibold hover:bg-white/5 transition" @click="logout" :disabled="loading">
                <span x-show="!loading">Sair</span>
                <span x-show="loading">Saindo...</span>
              </button>
            </div>
          </template>
          <template x-if="!user">
            <a href="account.html" class="inline-flex items-center px-4 py-2 rounded-full border border-brand-dark/60 text-brand-dark font-semibold hover:bg-brand-dark/10 transition">
              Login
            </a>
          </template>
        </div>
      </div>
    </header>

    <main class="flex-1 relative">
      <section class="w-full px-4 lg:px-10 py-10 space-y-4">
        <div class="flex flex-wrap items-center justify-between gap-4">
          <div class="space-y-2">
            <p class="text-sm uppercase tracking-wide text-slate-400 font-semibold">Descubra eventos</p>
            <h1 class="text-3xl sm:text-4xl font-bold text-white">Eventos disponíveis</h1>
            <p class="text-slate-300 text-sm" x-text="filteredSummary()"></p>
          </div>
          <button type="button" class="inline-flex items-center gap-2 rounded-full border border-white/15 px-4 py-2 text-sm font-semibold text-slate-100 hover:bg-white/5 transition lg:hidden" @click="toggleFilters" x-show="!filtersOpen" x-cloak>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-brand-dark" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 01.8 1.6l-3.6 4.8V15a1 1 0 01-.553.894l-3 1.5A1 1 0 018 16.5v-4.1L4.2 5.6A1 1 0 013 5z" clip-rule="evenodd" />
            </svg>
            Mostrar filtros
          </button>
        </div>
      </section>

      <div class="relative w-full px-4 lg:px-10 pb-12 flex flex-col lg:flex-row gap-6">
        <div class="fixed inset-0 bg-black/60 z-20 lg:hidden" x-show="filtersOpen" x-transition.opacity @click="toggleFilters" x-cloak></div>
        <aside x-cloak class="fixed top-24 bottom-6 left-4 right-4 z-30 w-auto max-w-sm bg-slate-900/90 rounded-3xl border border-white/10 shadow-2xl shadow-black/40 p-6 space-y-6 overflow-y-auto transform transition-all duration-300 lg:static lg:max-w-xs lg:w-80 lg:bg-slate-900/70 lg:shadow-lg lg:translate-x-0 lg:opacity-100 lg:visible lg:rounded-3xl lg:border lg:shadow-black/30 lg:h-fit lg:sticky lg:top-28" :class="filtersOpen ? 'translate-x-0 opacity-100 visible' : '-translate-x-full opacity-0 invisible lg:opacity-100 lg:visible'">
          <div>
            <h2 class="text-xl font-semibold text-white">Buscar eventos</h2>
            <p class="text-sm text-slate-400">Use filtros para refinar os resultados.</p>
          </div>
          <button type="button" class="lg:hidden inline-flex items-center gap-2 text-sm font-semibold text-slate-200 hover:text-white" @click="toggleFilters">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
            Fechar filtros
          </button>
          <form class="space-y-5" @submit.prevent>
            <div>
              <label class="text-sm font-medium text-slate-200">Palavra-chave</label>
              <input type="search" x-model="filtros.q" placeholder="Nome, artista, estilo" class="mt-1 w-full rounded-2xl border border-white/15 px-4 py-2.5 focus:border-brand-dark focus:ring-brand-dark/40">
            </div>
            <div>
              <label class="text-sm font-medium text-slate-200">Tags de artista/gênero</label>
              <input type="text" x-model="filtros.tags" placeholder="Ex.: rock, dj beta, mpb" class="mt-1 w-full rounded-2xl border border-white/15 px-4 py-2.5 focus:border-brand-dark focus:ring-brand-dark/40">
              <p class="mt-1 text-xs text-slate-400">Separe por vírgula para combinar múltiplas tags.</p>
            </div>
            <div>
              <label class="text-sm font-medium text-slate-200">Bairro / endereço</label>
              <input type="text" x-model="filtros.area" placeholder="Centro, Rua das Flores..." class="mt-1 w-full rounded-2xl border border-white/15 px-4 py-2.5 focus:border-brand-dark focus:ring-brand-dark/40">
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="text-sm font-medium text-slate-200">Data inicial</label>
                <input type="date" x-model="filtros.startDate" class="mt-1 w-full rounded-2xl border border-white/15 px-3 py-2.5 focus:border-brand-dark focus:ring-brand-dark/40">
              </div>
              <div>
                <label class="text-sm font-medium text-slate-200">Data final</label>
                <input type="date" x-model="filtros.endDate" class="mt-1 w-full rounded-2xl border border-white/15 px-3 py-2.5 focus:border-brand-dark focus:ring-brand-dark/40">
              </div>
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="text-sm font-medium text-slate-200">Preço mínimo</label>
                <input type="number" x-model.number="filtros.minPrice" min="0" step="1" placeholder="R$" class="mt-1 w-full rounded-2xl border border-white/15 px-3 py-2.5 focus:border-brand-dark focus:ring-brand-dark/40">
              </div>
              <div>
                <label class="text-sm font-medium text-slate-200">Preço máximo</label>
                <input type="number" x-model.number="filtros.maxPrice" min="0" step="1" placeholder="R$" class="mt-1 w-full rounded-2xl border border-white/15 px-3 py-2.5 focus:border-brand-dark focus:ring-brand-dark/40">
              </div>
            </div>
            <div class="flex items-center space-x-3">
              <input id="onlyFree" type="checkbox" x-model="filtros.onlyFree" class="rounded border-white/30 text-brand-dark focus:ring-brand-dark/40">
              <label for="onlyFree" class="text-sm text-slate-200">Mostrar apenas eventos gratuitos</label>
            </div>
            <button type="button" @click="resetFilters" class="w-full rounded-2xl border border-white/15 py-2.5 text-sm font-semibold text-slate-200 hover:bg-white/5">
              Limpar filtros
            </button>
          </form>
        </aside>

        <div class="flex-1 pt-6 lg:pt-0">
          <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
            <template x-for="evento in paginatedEventos()" :key="evento.id">
              <article class="bg-slate-900/70 rounded-3xl border border-white/10 shadow-xl shadow-black/40 p-5 flex flex-col space-y-4">
                <div class="rounded-2xl border border-white/15 bg-black/30 overflow-hidden relative w-full aspect-[16/9]">
                  <template x-if="evento.image_url">
                    <img :src="evento.image_url" alt="" class="absolute inset-0 w-full h-full object-cover">
                  </template>
                  <div class="absolute inset-0 flex items-center justify-center text-slate-400 text-sm" x-show="!evento.image_url">
                    Sem imagem
                  </div>
                </div>
                <div>
                  <span class="text-sm font-semibold text-brand-dark" x-text="formatDate(evento.date)"></span>
                  <h3 class="text-xl font-bold text-white" x-text="evento.title || 'Evento sem título'"></h3>
                  <p class="text-sm text-slate-300" x-text="formatLocation(evento)"></p>
                </div>
                <p class="text-slate-300 text-sm leading-relaxed max-h-28 overflow-hidden" x-text="evento.description || 'Sem descrição disponível.'"></p>
                <div class="flex items-center justify-between pt-2">
                  <span class="text-base font-semibold text-white" x-text="formatPrice(evento)"></span>
                  <a :href="`event.html?id=${encodeURIComponent(evento.id)}`" class="text-sm font-semibold text-brand-dark hover:underline">Ver detalhes</a>
                </div>
              </article>
            </template>
          </div>
          <template x-if="!paginatedEventos().length && !loading">
            <div class="mt-6 rounded-3xl border border-dashed border-white/15 bg-slate-900/60 p-8 text-center text-slate-300">
              Nenhum evento encontrado para os filtros escolhidos.
            </div>
          </template>
          <div class="mt-8 flex flex-wrap items-center justify-between gap-4" x-show="totalPages() > 1">
            <p class="text-sm text-slate-300" x-text="paginationSummary()"></p>
            <div class="flex flex-wrap items-center gap-2">
              <button type="button" class="px-3 py-2 rounded-full border border-white/20 text-sm text-slate-100 hover:bg-white/10 disabled:opacity-40 disabled:cursor-not-allowed" @click="setPage(currentPage - 1)" :disabled="currentPage === 1">Anterior</button>
              <template x-for="page in totalPages()" :key="page">
                <button type="button" class="w-10 h-10 rounded-full border text-sm font-semibold transition" :class="page === currentPage ? 'bg-brand-dark border-brand-dark text-white' : 'border-white/20 text-slate-200 hover:bg-white/10'" @click="setPage(page)" x-text="page"></button>
              </template>
              <button type="button" class="px-3 py-2 rounded-full border border-white/20 text-sm text-slate-100 hover:bg-white/10 disabled:opacity-40 disabled:cursor-not-allowed" @click="setPage(currentPage + 1)" :disabled="currentPage === totalPages()">Próxima</button>
            </div>
          </div>
        </div>
      </div>
      <div x-show="loading" class="mt-8 text-center text-slate-300">Carregando eventos...</div>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-950 text-white mt-auto">
      <div class="max-w-6xl mx-auto px-4 py-10 grid gap-8 md:grid-cols-3">
        <div class="space-y-3">
          <div class="flex items-center gap-3">
            <div class="w-20 h-20 rounded-full overflow-hidden flex items-center justify-center shrink-0">
              <img src="assets/logo.png" alt="Logo ShowMe" class="w-full h-full object-cover">
            </div>
            <span class="text-xl font-semibold tracking-tight">ShowMe</span>
          </div>
          <p class="text-sm text-white/70">ShowMe conecta você aos melhores eventos independentes da sua região.</p>
        </div>
        <div>
          <h4 class="font-semibold mb-3">Navegação</h4>
          <ul class="space-y-2 text-sm text-white/70">
            <li><a href="index.html" class="hover:text-white">Home</a></li>
            <li><a href="search.html" class="hover:text-white">Eventos</a></li>
            <li><a href="create-event.html" class="hover:text-white">Criar evento</a></li>
            <li><a href="create-establishment.html" class="hover:text-white">Criar estabelecimento</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-3">Contato</h4>
          <a href="mailto:contato@showme.com" class="block text-sm text-white/70 hover:text-white">contato@showme.com</a>
          <a href="tel:+551140000000" class="block text-sm text-white/70 hover:text-white">(11) 4000-0000</a>
          <div class="mt-4 flex space-x-3">
            <div class="w-9 h-9 rounded-full border border-white/40 border-dashed"></div>
            <div class="w-9 h-9 rounded-full border border-white/40 border-dashed"></div>
            <div class="w-9 h-9 rounded-full border border-white/40 border-dashed"></div>
          </div>
        </div>
      </div>
      <div class="border-t border-white/10 py-4 text-center text-xs text-white/60">
        © <span x-text="new Date().getFullYear()"></span> ShowMe. Todos os direitos reservados.
      </div>
    </footer>
  </div>

  <script>
    function searchApp() {
      return {
        apiBase: 'http://localhost:8000',
        eventos: [],
        loading: true,
        filtersOpen: typeof window !== 'undefined' ? window.matchMedia('(min-width: 1024px)').matches : true,
        currentPage: 1,
        perPage: 12,
        lastFilterSignature: '',
        handleResize: null,
        genreLookup: {},
        artistLookup: {},
        filtros: {
          q: '',
          tags: '',
          area: '',
          startDate: '',
          endDate: '',
          minPrice: '',
          maxPrice: '',
          onlyFree: false,
        },
        init() {
          this.filtersOpen = typeof window !== 'undefined' ? window.matchMedia('(min-width: 1024px)').matches : true;
          this.carregarEventos();
          this.handleResize = () => {
            if (window.matchMedia('(min-width: 1024px)').matches) {
              this.filtersOpen = true;
            }
          };
          window.addEventListener('resize', this.handleResize);
        },
        async carregarEventos() {
          this.loading = true;
          try {
            const [eventsRes, genresRes, artistsRes] = await Promise.all([
              fetch(`${this.apiBase}/events`),
              fetch(`${this.apiBase}/genres`),
              fetch(`${this.apiBase}/artists`)
            ]);
            if (!eventsRes.ok) throw new Error('Erro ao buscar eventos');
            const eventsData = await eventsRes.json();
            const genresData = genresRes.ok ? await genresRes.json() : [];
            const artistsData = artistsRes.ok ? await artistsRes.json() : [];
            this.genreLookup = this.buildLookup(genresData);
            this.artistLookup = this.buildLookup(artistsData);
            this.eventos = this.decorateEventos(eventsData);
            this.currentPage = 1;
          } catch (err) {
            console.warn(err);
            this.eventos = [];
            this.genreLookup = {};
            this.artistLookup = {};
          } finally {
            this.loading = false;
          }
        },
        resetFilters() {
          this.filtros = { q: '', tags: '', area: '', startDate: '', endDate: '', minPrice: '', maxPrice: '', onlyFree: false };
          this.currentPage = 1;
        },
        buildLookup(list) {
          if (!Array.isArray(list)) return {};
          return list.reduce((acc, item) => {
            if (item?.id != null && item?.name) {
              acc[item.id] = item.name;
            }
            return acc;
          }, {});
        },
        decorateEventos(eventos) {
          const items = Array.isArray(eventos) ? eventos : [];
          return items.map((evento) => ({
            ...evento,
            tagTokens: this.buildEventTagTokens(evento)
          }));
        },
        buildEventTagTokens(evento) {
          const tokens = new Set();
          const pushToken = (value) => {
            if (!value) return;
            tokens.add(value.toLowerCase());
          };
          (evento?.genre_ids || []).forEach((id) => pushToken(this.genreLookup[id]));
          (evento?.artist_ids || []).forEach((id) => pushToken(this.artistLookup[id]));
          return Array.from(tokens);
        },
        ensureEventTagTokens(evento) {
          if (!Array.isArray(evento.tagTokens)) {
            evento.tagTokens = this.buildEventTagTokens(evento);
          }
          return evento.tagTokens;
        },
        parseTagFilter() {
          return (this.filtros.tags || '')
            .split(/[,;]+/)
            .map((token) => token.trim().toLowerCase())
            .filter(Boolean);
        },
        filteredSummary() {
          const total = this.filteredEventos().length;
          if (!total) return 'Nenhum evento encontrado até o momento.';
          return total === 1 ? '1 evento encontrado' : `${total} eventos encontrados`;
        },
        filteredEventos() {
          const signature = JSON.stringify(this.filtros);
          if (signature !== this.lastFilterSignature) {
            this.lastFilterSignature = signature;
            this.currentPage = 1;
          }
          const tagFilters = this.parseTagFilter();
          return (this.eventos || []).filter((evento) => {
            const title = (evento.title || '').toLowerCase();
            const desc = (evento.description || '').toLowerCase();
            const city = (evento.city || '').toLowerCase();
            const neighborhood = (evento.neighborhood || '').toLowerCase();
            const street = (evento.street || '').toLowerCase();
            const query = this.filtros.q.toLowerCase();
            const matchText = query ? (title.includes(query) || desc.includes(query)) : true;
            const matchCity = this.filtros.area
              ? neighborhood.includes(this.filtros.area.toLowerCase())
                || street.includes(this.filtros.area.toLowerCase())
                || city.includes(this.filtros.area.toLowerCase())
              : true;
            const date = evento.date ? new Date(evento.date) : null;
            const startDate = this.filtros.startDate ? new Date(this.filtros.startDate) : null;
            const endDate = this.filtros.endDate ? new Date(this.filtros.endDate) : null;
            const matchStart = startDate && date ? date >= startDate : true;
            const matchEnd = endDate && date ? date <= new Date(endDate.getTime() + 24 * 60 * 60 * 1000 - 1) : true;
            const matchPriceMin = this.filtros.minPrice !== '' && evento.price != null
              ? Number(evento.price) >= Number(this.filtros.minPrice)
              : true;
            const matchPriceMax = this.filtros.maxPrice !== '' && evento.price != null
              ? Number(evento.price) <= Number(this.filtros.maxPrice)
              : true;
            const matchFree = this.filtros.onlyFree ? !!evento.is_free : true;
            const eventTags = this.ensureEventTagTokens(evento);
            const matchTags = tagFilters.length
              ? tagFilters.every((tag) => eventTags.some((token) => token.includes(tag)))
              : true;

            return matchText && matchCity && matchStart && matchEnd && matchPriceMin && matchPriceMax && matchFree && matchTags;
          }).sort((a, b) => {
            const da = a.date ? new Date(a.date).getTime() : Infinity;
            const db = b.date ? new Date(b.date).getTime() : Infinity;
            return da - db;
          });
        },
        paginatedEventos() {
          const events = this.filteredEventos();
          const perPage = Number(this.perPage) || 9;
          const maxPage = Math.max(1, Math.ceil(events.length / perPage));
          if (this.currentPage > maxPage) {
            this.currentPage = maxPage;
          }
          if (this.currentPage < 1) {
            this.currentPage = 1;
          }
          const start = (this.currentPage - 1) * perPage;
          return events.slice(start, start + perPage);
        },
        totalPages() {
          const events = this.filteredEventos();
          return Math.max(1, Math.ceil(events.length / (Number(this.perPage) || 9)));
        },
        paginationSummary() {
          const total = this.filteredEventos().length;
          if (!total) return 'Nenhum evento disponível.';
          const perPage = Number(this.perPage) || 9;
          const start = (this.currentPage - 1) * perPage + 1;
          const end = Math.min(start + perPage - 1, total);
          return `Exibindo ${start}-${end} de ${total} eventos`;
        },
        setPage(page) {
          if (typeof page !== 'number') return;
          const total = this.totalPages();
          const next = Math.min(Math.max(1, page), total);
          this.currentPage = next;
          window.scrollTo({ top: 0, behavior: 'smooth' });
        },
        toggleFilters() {
          this.filtersOpen = !this.filtersOpen;
        },
        formatDate(dateString) {
          if (!dateString) return 'Data a definir';
          const date = new Date(dateString);
          if (Number.isNaN(date.getTime())) return 'Data a definir';
          return date.toLocaleDateString('pt-BR', { day: '2-digit', month: 'short', year: 'numeric' });
        },
        formatLocation(evento) {
          if (evento?.neighborhood) return evento.neighborhood;
          if (evento?.city) return evento.city;
          return 'Bairro não informado';
        },
        formatPrice(evento) {
          if (evento?.is_free) return 'Evento gratuito';
          if (evento?.price === 0) return 'Evento gratuito';
          if (evento?.price == null || Number.isNaN(Number(evento?.price))) return 'Preço não informado';
          return Number(evento.price).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }
      }
    }
  </script>
</body>
</html>
